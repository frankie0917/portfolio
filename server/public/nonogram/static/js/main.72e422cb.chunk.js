(this["webpackJsonpno2g-react"]=this["webpackJsonpno2g-react"]||[]).push([[0],{12:function(e,t,r){},22:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r(1),l=r.n(i),a=r(13),c=r.n(a),s=(r(12),r(23)),o=r(5),u=r(3),h=r(2),d=r(10),f=r(11),j=r(4),v=function(){function e(t){if(Object(d.a)(this,e),this.size=100,this.maxCellSize=0,this.parent=void 0,this.type=void 0,this.value=[],Object(j.c)(this),this.parent=t.parent,this.type=t.type,t.value){var r,n=Object(h.a)(t.value);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.addIndicator(i)}}catch(l){n.e(l)}finally{n.f()}}}return Object(f.a)(e,[{key:"addIndicator",value:function(e){this.parent.playing||("row"===this.type?this.parent.addRowToCurrent():this.parent.addColToCurrent(),this.value.length>9&&("row"===this.type?this.parent.contentHeight+=40:this.parent.contentWidth+=40),this.value.push(e))}},{key:"deleteIndicator",value:function(e){this.parent.playing||("row"===this.type?this.parent.deleteRowToCurrent(e):this.parent.deleteColToCurrent(e),this.value.length>9&&("row"===this.type?this.parent.contentHeight-=40:this.parent.contentWidth-=40),this.value.splice(e,1))}},{key:"addIndicatorCell",value:function(e){this.parent.playing||(this.value[e].push(1),this.maxCellSize=Math.max(this.maxCellSize,this.value[e].length),this.maxCellSize>5&&(this.size+=16))}},{key:"deleteIndicatorCell",value:function(e,t){this.parent.playing||(this.value[e].splice(t,1),this.maxCellSize=Math.max(this.maxCellSize,this.value[e].length),this.maxCellSize>5&&(this.size-16>100?this.size-=16:this.size=100))}},{key:"setIndicatorCell",value:function(e,t,r){this.parent.playing||(this.value[e][t]=r)}}]),e}();var b=function(){function e(){Object(d.a)(this,e),this.contentHeight=500,this.contentWidth=500,this.currentRows=0,this.currentCols=0,this.current=[],this.success=[],this.colIndicators=new v({parent:this,type:"col",value:[[2],[4],[4],[4],[2]]}),this.rowIndicators=new v({parent:this,type:"row",value:[[1,1],[5],[5],[3],[1]]}),this.rowValueToIndicator=[],this.colValueToIndicator=[],this.playing=!1,Object(j.c)(this)}return Object(f.a)(e,[{key:"setBoard",value:function(e){for(var t=0;t<e;t++)this.rowIndicators.addIndicator([1]),this.colIndicators.addIndicator([1])}},{key:"solve",value:function(){var e,t=this,r=function e(t,r){if(t.includes(0))return[Array(r).fill("-")];if(t[0]>r)return[];var n=r-t[0];if(1===t.length){for(var i=[],l=0;l<n+1;l++)i.push([].concat(Object(o.a)(Array(l).fill("-")),Object(o.a)(Array(t[0]).fill("O")),Object(o.a)(Array(n-l).fill("-"))));return i}for(var a=[],c=0;c<n;c++)for(var s=e(t.slice(1),n-c-1),u=0;u<s.length;u++)a.push([].concat(Object(o.a)(Array(c).fill("-")),Object(o.a)(Array(t[0]).fill("O")),["-"],Object(o.a)(s[u])));return a},n=[],i=Object(h.a)(this.current.entries());try{for(i.s();!(e=i.n()).done;){var l=Object(u.a)(e.value,1)[0];n[l]=r(this.rowIndicators.value[l],this.current[0].length)}}catch(O){i.e(O)}finally{i.f()}console.log("arrangements",n);var a=function e(r){console.log("set",r);var i,l=[],a=Object(h.a)(r.entries());try{for(a.s();!(i=a.n()).done;){var c=Object(u.a)(i.value,2),s=c[0],o=c[1];l.push(n[s][o])}}catch(O){a.e(O)}finally{a.f()}if(function(e){var r,n=[],i=Object(h.a)(e.entries());try{for(i.s();!(r=i.n()).done;){var l,a=Object(u.a)(r.value,2),c=a[0],s=a[1],o=Object(h.a)(s.entries());try{for(o.s();!(l=o.n()).done;){var d=Object(u.a)(l.value,2),f=d[0],j=d[1];n[f]||(n[f]=[]);var v=n[f];"O"===j?(0===c&&v.push(1),c>0&&(v[v.length-1]+=1)):v.push(0)}}catch(O){o.e(O)}finally{o.f()}}}catch(O){i.e(O)}finally{i.f()}var b,y=Object(h.a)(n.entries());try{for(y.s();!(b=y.n()).done;){var x=Object(u.a)(b.value,2),g=x[0],p=x[1];n[g]=p.filter((function(e){return 0!==e})),0===n[g].length&&n[g].push(0)}}catch(O){y.e(O)}finally{y.f()}var m,w=Object(h.a)(n.entries());try{for(w.s();!(m=w.n()).done;){var I=Object(u.a)(m.value,2),C=I[0],N=I[1];if(JSON.stringify(t.colIndicators.value[C])!==JSON.stringify(N))return!1}}catch(O){w.e(O)}finally{w.f()}return!0}(l))return l;for(var d=0,f=[],j=r.length-1;j>=0;j--)if(f[j]=r[j],void 0===r[j+1]||r[j+1]===n[j+1].length-1){if(0===j&&r[j]===n[0].length-1)return!1;d+j===r.length-1&&(f[j]=r[j]+1),r[j]===n[j].length-1&&(f[j]=0),d++}return e(f)}(Array(n.length).fill(0));if(!1!==a){var c,s=Object(h.a)(a.entries());try{for(s.s();!(c=s.n()).done;){var d,f=Object(u.a)(c.value,2),j=f[0],v=f[1],b=Object(h.a)(v.entries());try{for(b.s();!(d=b.n()).done;){var y=Object(u.a)(d.value,2),x=y[0],g=y[1];this.setCurrentCell(j,x,g)}}catch(O){b.e(O)}finally{b.f()}}}catch(O){s.e(O)}finally{s.f()}}else alert("\u65e0\u89e3\u6cd5")}},{key:"addRowToCurrent",value:function(e){this.playing||(this.currentRows++,this.current.push(Array(this.currentCols).fill(e||"-")))}},{key:"addColToCurrent",value:function(e){if(!this.playing){this.currentCols++;var t,r=Object(h.a)(this.current);try{for(r.s();!(t=r.n()).done;){t.value.push(e||"-")}}catch(n){r.e(n)}finally{r.f()}}}},{key:"deleteRowToCurrent",value:function(e){this.playing||(this.currentRows--,this.current.splice(e,1))}},{key:"deleteColToCurrent",value:function(e){if(!this.playing){this.currentCols--;var t,r=Object(h.a)(this.current);try{for(r.s();!(t=r.n()).done;){t.value.splice(e,1)}}catch(n){r.e(n)}finally{r.f()}}}},{key:"setCurrentCell",value:function(e,t,r){this.current[e][t]=r;var n=function(e){var t,r=[],n=[],i=Object(h.a)(e.entries());try{for(i.s();!(t=i.n()).done;){var l,a=Object(u.a)(t.value,2),c=a[0],s=a[1],o=Object(h.a)(s.entries());try{for(o.s();!(l=o.n()).done;){var d=Object(u.a)(l.value,2),f=d[0],j=d[1];r[f]||(r[f]=[]),n[c]||(n[c]=[]);var v=r[f],b=n[c];"O"===j?(0===c&&v.push(1),c>0&&(v[v.length-1]+=1),0===f&&b.push(1),f>0&&(b[b.length-1]+=1)):(v.push(0),b.push(0))}}catch(k){o.e(k)}finally{o.f()}}}catch(k){i.e(k)}finally{i.f()}var y,x=Object(h.a)(r.entries());try{for(x.s();!(y=x.n()).done;){var g=Object(u.a)(y.value,2),O=g[0],p=g[1];r[O]=p.filter((function(e){return 0!==e})),0===r[O].length&&r[O].push(0)}}catch(k){x.e(k)}finally{x.f()}var m,w=Object(h.a)(n.entries());try{for(w.s();!(m=w.n()).done;){var I=Object(u.a)(m.value,2),C=I[0],N=I[1];n[C]=N.filter((function(e){return 0!==e})),0===n[C].length&&n[C].push(0)}}catch(k){w.e(k)}finally{w.f()}return{rowIndicator:n,colIndicator:r}}(this.current),i=n.colIndicator,l=n.rowIndicator;this.rowValueToIndicator=l,this.colValueToIndicator=i}}]),e}(),y=Object(i.createContext)(new b),x=function(e){var t=e.children;return Object(n.jsx)(y.Provider,{value:new b,children:t})},g=function(){return Object(i.useContext)(y)},O=Object(s.a)((function(e){var t=e.mode,r=g(),i=r.colIndicators,l=r.rowIndicators,a=r.current,c=r.contentWidth,s=r.contentHeight;return Object(n.jsx)("div",{id:"content",className:"border-t border-l grid border-gray-400 bg-gray-100",style:{height:"preview"===t?s/3:s,width:"preview"===t?c/3:c,gridTemplateRows:Array(l.value.length).fill("1fr").join(" ")},children:l.value.map((function(e,r){return Object(n.jsx)("div",{className:"grid",style:{gridTemplateColumns:Array(i.value.length).fill("1fr").join(" ")},children:i.value.map((function(e,i){return Object(n.jsx)(p,{rowIndex:r,cellIndex:i,mode:t||"normal",value:a[r][i]},i)}))},r)}))})})),p=Object(s.a)((function(e){var t=e.value,r=e.cellIndex,i=e.rowIndex,l=e.mode,a=g(),c=" w-full h-full";return Object(n.jsx)("div",{className:"".concat("normal"===l&&"border"," h-full w-full cursor-pointer"),onClick:function(){a.setCurrentCell(i,r,"-"===t?"O":"O"===t?"X":"-")},children:"-"===t?Object(n.jsx)("div",{className:c}):"O"===t?Object(n.jsx)("div",{className:"bg-gray-600"+c}):Object(n.jsx)("div",{style:{fontSize:"normal"===l?25:10},className:"flex justify-center items-center text-gray-600"+c,children:"X"})})})),m=r(14),w=r(15),I=function(e){var t=e.value,r=e.setValue,i=Object(w.a)(e,["value","setValue"]);return Object(n.jsx)("input",Object(m.a)({value:t,onChange:function(e){var t=parseInt(e.target.value.replace(/\D/g,""));isNaN(t)?r(0):r(t)}},i))},C=Object(s.a)((function(){var e=g(),t=e.colIndicators,r=t.value,l=t.size,a=e.rowIndicators,c=e.contentWidth,s=Object(i.useState)(!1),o=Object(u.a)(s,2),h=o[0],d=o[1];return Object(n.jsxs)("div",{className:"flex flex-row relative",style:{height:l},children:[Object(n.jsxs)("div",{style:{width:a.size},className:"flex justify-center items-center relative",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:["\u9884\u89c8",h&&Object(n.jsx)("div",{className:"absolute bottom-1/2 z-20 right-1/2 border-2 border-red-400",style:{transform:"translate(100%,100%)"},children:Object(n.jsx)(O,{mode:"preview"})})]}),Object(n.jsx)("div",{className:"h-full grid bg-gray-700",style:{width:c,gridTemplateColumns:Array(r.length).fill("1fr").join(" ")},children:r.map((function(e,t){return Object(n.jsx)(N,{value:e,index:t},t)}))}),Object(n.jsx)("div",{style:{position:"absolute",right:0,top:"50%",transform:"translate(100%,-50%)"},className:"cursor-pointer text-center flex flex-row items-center justify-center bg-gray-600 border-l w-6 h-full",onClick:function(){return e.colIndicators.addIndicator([1])},children:"\u6dfb\u52a0\u5217"})]})})),N=Object(s.a)((function(e){var t=e.value,r=e.index,l=g(),a=l.colValueToIndicator[r],c=Object(i.useMemo)((function(){return JSON.stringify(a)===JSON.stringify(t)}),[a,t]);return Object(n.jsxs)("div",{className:"".concat(c&&"bg-gray-500"," border-l flex flex-col"),style:{position:"relative"},children:[Object(n.jsxs)("div",{className:"bg-gray-400 text-gray-600 text-center flex flex-row items-center",children:[Object(n.jsx)("div",{className:"h-4 flex justify-center items-center bg-gray-300",style:{position:"absolute",left:0,right:0,top:-17},children:r+1}),Object(n.jsx)("div",{className:"flex flex-row flex-1 justify-center items-center cursor-pointer h-full text-white",onClick:function(){return l.colIndicators.addIndicatorCell(r)},children:"+"}),Object(n.jsx)("div",{className:"flex flex-row flex-1 justify-center items-center cursor-pointer h-full border-l text-white",onClick:function(){return l.colIndicators.deleteIndicator(r)},children:"-"})]}),Object(n.jsx)("div",{className:"flex flex-col justify-end mt-auto",children:t.map((function(e,i){return Object(n.jsxs)("div",{style:{height:15},className:"flex flex-row hover:bg-gray-400 group overflow-hidden relative colGroup",children:[Object(n.jsx)(I,{value:l.colIndicators.value[r][i],setValue:function(e){return l.colIndicators.setIndicatorCell(r,i,e)},className:"bg-transparent text-center group-hover:text-gray-800 w-full h-full"},i),Object(n.jsx)("div",{onClick:function(){t.length>1&&l.colIndicators.deleteIndicatorCell(r,i)},className:"".concat(t.length>1&&"xBtn"," bg-red-900 w-3 absolute -right-6 flex justify-center hover:bg-red-600 z-10 cursor-pointer items-center h-full"),children:"x"})]},i)}))})]})})),k=Object(s.a)((function(){var e=g(),t=e.rowIndicators,r=t.value,i=t.size;return Object(n.jsxs)("div",{className:"ml-auto w-full h-full bg-gray-700",style:{width:i,position:"relative"},children:[Object(n.jsx)("div",{className:"h-full grid",style:{gridTemplateRows:Array(r.length).fill("1fr").join(" ")},children:r.map((function(e,t){return Object(n.jsx)(z,{index:t,row:e},t)}))}),Object(n.jsx)("div",{style:{position:"absolute",left:"50%",bottom:0,display:"block",transform:"translate(-50%,100%)"},className:" text-center border-t bg-gray-600 cursor-pointer h-6 w-full",onClick:function(){return e.rowIndicators.addIndicator([1])},children:"\u6dfb\u52a0\u884c"})]})})),z=Object(s.a)((function(e){var t=e.row,r=e.index,l=g(),a=l.rowValueToIndicator[r],c=Object(i.useMemo)((function(){return JSON.stringify(a)===JSON.stringify(t)}),[a,t]);return Object(n.jsxs)("div",{className:"".concat(c&&"bg-gray-500"," flex flex-row justify-between border-t h-full"),style:{position:"relative"},children:[Object(n.jsxs)("div",{className:"bg-gray-400 w-4 h-full text-gray-600 text-center flex flex-col justify-center items-center",children:[Object(n.jsx)("div",{className:"w-4 flex justify-center items-center bg-gray-300",style:{position:"absolute",top:0,bottom:0,left:-17},children:r+1}),Object(n.jsx)("div",{className:"flex flex-row w-full flex-1 justify-center items-center cursor-pointer text-white",style:{height:5},onClick:function(){return l.rowIndicators.addIndicatorCell(r)},children:"+"}),Object(n.jsx)("div",{className:"flex flex-row w-full flex-1 justify-center items-center cursor-pointer border-t text-white",style:{height:5},onClick:function(){return l.rowIndicators.deleteIndicator(r)},children:"-"})]}),Object(n.jsx)("div",{className:"flex",children:t.map((function(e,i){return Object(n.jsxs)("div",{style:{width:15},className:"h-full relative hover:bg-gray-400 rowGroup group overflow-hidden ",children:[Object(n.jsx)(I,{className:"bg-transparent flex-1 text-center group-hover:text-gray-800 w-full h-full",value:t[i],setValue:function(e){return l.rowIndicators.setIndicatorCell(r,i,e)}}),Object(n.jsx)("div",{onClick:function(){t.length>1&&l.rowIndicators.deleteIndicatorCell(r,i)},className:"".concat(t.length>1&&"xBtn"," bg-red-900 w-full absolute right-0 -bottom-6 flex justify-center hover:bg-red-600 z-10 cursor-pointer items-center h-3"),children:"x"})]},i)}))})]})})),T=Object(s.a)((function(){var e=g(),t=e.contentHeight,r=e.contentWidth,i=e.rowIndicators,l=e.colIndicators;e.playing;return Object(n.jsxs)("div",{className:"my-20",children:[Object(n.jsx)("h1",{className:"text-5xl text-center my-10",children:"no2g"}),Object(n.jsxs)("div",{id:"app",className:"mx-auto text-white bg-gray-800",style:{width:r+i.size,height:t+l.size,fontSize:12},children:[Object(n.jsx)(C,{}),Object(n.jsxs)("div",{style:{height:t},className:"flex flex-row",children:[Object(n.jsx)(k,{}),Object(n.jsx)(O,{})]})]})]})}));c.a.render(Object(n.jsx)(l.a.StrictMode,{children:Object(n.jsx)(x,{children:Object(n.jsx)(T,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.72e422cb.chunk.js.map